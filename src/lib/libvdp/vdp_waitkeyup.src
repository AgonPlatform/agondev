	.global _vdp_waitKeyUp
	.assume	adl=1
	.section .text

  .include "agon/mos.inc"
; ---------------------------------------------
; wait for key up state before returning

_vdp_waitKeyUp:	
  ld  iy, (_sys_vars)       ; get pointer to sysvars

wait:
	ld a, (iy + sysvar_vkeydown)	; get key state
	cp 0							            ; are keys up, none currently pressed?
	jr nz, wait
	ret 				                  ; return

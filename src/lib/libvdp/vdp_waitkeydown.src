	.global _vdp_waitKeyDown
	.assume	adl=1
	.section .text

  .include "agon/mos.inc"
; ---------------------------------------------
; wait for key down state before returning

_vdp_waitKeyDown:	
  ld  iy, (_sys_vars)       ; get pointer to sysvars

wait:
	ld a, (iy + sysvar_vkeydown)	; get key state
	cp 0		      		            ; are keys up, none currently pressed?
	jr z, wait
	ret 				                  ; return

	.assume	adl =1
	.include "agon/mos.inc"
	.section .text
	.global  _mos_fgetc
_mos_fgetc:					; Note: does not return carry flag, which set for EOF
  pop de
  ex (sp), hl
  push de
  ld c, l           ; filehandle
	ld	a, mos_fgetc
	rst.lil	08h				; returns character in A (mos_fgetc returns zero on error)
	ret	

	.assume	adl=1
	.section	.text
	.global	_calloc
	.type	_calloc, @function

; void *calloc(size_t nmemb, size_t size)
_calloc:
	pop	de
	pop	bc
	ex	(sp), hl
	push	bc
	push	de
	call	__imulu
	push	hl
	push	hl
	call	_malloc
	pop	de
	add	hl, de
	xor	a, a
	sbc	hl, de
	ld	e, a
	push	de
	push	hl
	call	nz, _memset
	pop	de
	pop	de
	pop	de
	ret

	.extern	__imulu
	.extern	_malloc
	.extern	_memset

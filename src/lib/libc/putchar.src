	.assume	adl=1

	include	"stdio.inc"

	.section	.text
	.global	_putchar
  .weak _putchar
_putchar:
	pop	de
	ex	(sp), hl		; get character passed as int in HL
	push	de

	ld 	a, l
	cp 	a, 10 			; check .if LF
	jr	nz, .outputchar
  ld  h, l        ; save character
	ld 	a, 13			  ; print CR
  rst.lil 10h     ; output to console
  ld  a, l        ; restore character
.outputchar:
  rst.lil 10h     ; output to console
	ret

	.extern	_stdout
	
